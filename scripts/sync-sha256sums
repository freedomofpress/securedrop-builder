#!/bin/bash

# A script to update the sha256sums from localwheels directory

set -e
set -u
set -o pipefail
set -o nounset


bootstrap=${BOOTSTRAP:-}
release=${RELEASE:-"buster"}


if [ ! -z "$bootstrap" ]; then
	cd ./bootstrap-$bootstrap/
	sha256sum * > ../bootstrap-sha256sums-${bootstrap}.txt

	echo "Now you must sign the generated bootstrap-sha256sums-${bootstrap}.txt file:"
	echo "gpg --armor --output bootstrap-sha256sums-${bootstrap}.txt.asc --detach-sig  bootstrap-sha256sums-${bootstrap}.txt"
else
	cd ./localwheels-${release}/
	sha256sum * > ../sha256sums-${release}.txt

	echo "Now you must sign the generated sha256sums.txt file:"
	echo "gpg --armor --output sha256sums-${release}.txt.asc --detach-sig  sha256sums-${release}.txt"
fi
